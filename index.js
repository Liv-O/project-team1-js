import{i as r,A as F,a as L,S as E}from"./assets/vendor-DHN7Kf4x.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const p=document.querySelector(".backdrop-book-modal"),U=document.querySelector(".book-modal-close-btn"),K=document.querySelector(".book-img-container"),z=document.querySelector(".book-modal-info"),W="https://books-backend.p.goit.global/";async function Z(e){try{const n=(await L.get(`${W}books/${e}`)).data;j(n)}catch(t){r.error({title:"Error",message:"Error while querying",position:"topRight"}),console.error("Error while querying: ",t)}}function j(e){K.innerHTML=`<img src="${e.book_image}" alt="${e.title}" class="book-img" />`,z.innerHTML=`
  <h2 class="book-title">${e.title}</h2>
  <p class="book-author">${e.author}</p>
  <p class="book-price">$${e.price}</p>
  `}function Q(){p.classList.remove("window-is-invisible"),document.body.classList.add("not-scrolling-page"),document.addEventListener("keydown",H)}U.addEventListener("click",S);p.addEventListener("click",e=>{e.target===p&&S()});function S(){p.classList.add("window-is-invisible"),document.body.classList.remove("not-scrolling-page"),document.removeEventListener("keydown",H)}function H(e){e.key==="Escape"&&S()}const q=document.querySelector("#quantity"),G=document.querySelector(".neg-book-btn"),Y=document.querySelector(".add-book-btn"),J=document.querySelector(".add-to-cart-btn"),X=document.querySelector(".buy-now-btn");function f(){return Number(q.value)}Y.addEventListener("click",()=>{q.value=f()+1});G.addEventListener("click",()=>{const e=f();e>1&&(q.value=e-1)});J.addEventListener("click",e=>{e.preventDefault(),console.log("Number of selected books:",f()),r.success({title:"Success",message:`Added ${f()} book(s) to cart`,position:"topRight"})});X.addEventListener("click",e=>{e.preventDefault(),r.info({title:"",message:"Thank you for your purchase",position:"topRight"})});new F(".accordion-container",{duration:300,showMultiple:!0});const ee=document.querySelector("#books-categories-desktop-list"),te=document.querySelector(".categories-dropdown-wrapper"),C=document.querySelector(".categories-dropdown-btn"),g=document.querySelector("#books-categories-dropdown-list"),b=document.querySelector(".books-list"),y=document.querySelector(".books-shown-quantity"),k=document.querySelector(".books-load-more");L.defaults.baseURL="https://books-backend.p.goit.global/books";let v=0,a=[],V="all";const oe=4;function ne(){return window.innerWidth>=1440?24:10}function se(){if(!a.length){b.innerHTML="<li class='books-list-problem'>No books found</li>",y.textContent="0 books",k.classList.add("books-hidden");return}const e=a.slice(0,v);b.innerHTML=e.map(t=>`
      <li class="book-list-item">
          <img class="book-item-img" src="${t.book_image}" alt="${t.title}" />
          <div class="book-item-description">
            <div class="book-description-text">
              <div class="book-title-and-author">
                <h3 class="book-item-title">${le(t.title)||"No Title"}</h3>
                <p class="book-item-author">${t.author||"Unknown Author"}</p>
              </div>
              <p class="book-item-price">$${parseInt(t.price)}</p>
            </div>
            <button class="book-item-btn" type="button" data-book-id="${t._id}">Learn More</button>
          </div>
      </li>
  `).join(""),y.textContent=`Showing ${e.length} of ${a.length} books`,k.classList.toggle("books-hidden",v>=a.length)}function ie(e){let t='<li class="category-list-item active" data-category-name="all">All categories</li>';return e.forEach(n=>{var i;(i=n.list_name)!=null&&i.trim()&&(t+=`<li class="category-list-item" data-category-name="${n.list_name}">${n.list_name}</li>`)}),t}function re(e,t){const n=e.querySelector(".category-list-item.active");n&&n.classList.remove("active"),t.classList.add("active")}function ce(e,t=!1){e.querySelectorAll(".category-list-item").forEach(n=>{n.addEventListener("click",i=>{if(re(e,i.target),M(i.target.dataset.categoryName),t){const o=C.querySelector(".categories-dropdown-text");o.textContent=i.target.textContent,e.classList.add("books-hidden")}})})}async function ae(){const e=window.innerWidth<1440,t=e?g:ee;t.innerHTML="<li>Loading categories...</li>";try{const{data:n}=await L.get("/category-list"),i=ie(n);if(t.innerHTML=i,ce(t,e),e){const o=C.querySelector(".categories-dropdown-text"),s=t.querySelector(".category-list-item.active");o.textContent=(s==null?void 0:s.textContent)||"All categories"}}catch{t.innerHTML="<li>Error loading categories</li>"}}async function M(e,t=!1){t?v+=oe:(b.innerHTML="<li class='books-list-problem'>Loading books...</li>",y.textContent="",k.classList.add("books-hidden"),v=ne(),a=[],V=e);const n=e==="all"?"/top-books":`/category?category=${e}`;try{if(!a.length||!t){const{data:i}=await L.get(n);let o=[];e==="all"?i.forEach(c=>{var u;(u=c.books)!=null&&u.length&&o.push(...c.books)}):o=i;const s=new Set;a=o.filter(c=>{const u=(c.title||"").toLowerCase().trim();return s.has(u)?!1:(s.add(u),!0)})}se()}catch{b.innerHTML="<li class='books-list-problem'>Error loading books</li>",y.textContent="Error",k.classList.add("books-hidden")}}function le(e){return e?e.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):""}k.addEventListener("click",()=>M(V,!0));C.addEventListener("click",()=>g.classList.toggle("books-hidden"));document.addEventListener("click",e=>{!te.contains(e.target)&&!g.classList.contains("books-hidden")&&g.classList.add("books-hidden")});b.addEventListener("click",async e=>{if(!e.target.classList.contains("book-item-btn"))return;const t=e.target.dataset.bookId;Q(),await Z(t)});ae().then(()=>M("all"));const w=document.querySelector(".backdrop-contact-modal"),de=document.querySelector(".modal-close-btn");document.querySelector(".contact-modal-text");de.addEventListener("click",x);w.addEventListener("click",e=>{e.target===w&&x()});function x(){w.classList.add("window-is-invisible"),document.body.classList.remove("not-scrolling-page"),document.removeEventListener("keydown",ue)}function ue(e){e.key==="Escape"&&x()}const m=document.querySelector(".contact-modal-form");m.addEventListener("submit",e=>{e.preventDefault();const t=m.elements.name.value.trim().toLowerCase(),n=m.elements.email.value.trim().toLowerCase(),i=m.elements.message.value.trim().toLowerCase();if(!t||!n){r.error({title:"Error",message:"Please, fill in the Name and Email fields!",position:"topRight"});return}r.success({title:"Congratulations!",message:"Data sent. Have a nice day)",position:"topRight"}),console.log({name:t,email:n,message:i}),m.reset()});new E(".events-swiper",{pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".events-button-next",prevEl:".events-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0},grabCursor:!0,breakpoints:{375:{slidesPerView:1,spaceBetween:20},768:{slidesPerView:2,spaceBetween:24},1440:{slidesPerView:3}}});const me=document.querySelector(".events-list");me.addEventListener("click",e=>{const t=e.target.closest(".event-btn");if(!t)return;const n=t.closest(".event-item");if(!n)return;const i=n.querySelector(".event-subtitle").textContent;subtitleModal.textContent=i,be()});function be(){contactModal.classList.remove("window-is-invisible"),document.body.classList.add("not-scrolling-page"),document.addEventListener("keydown",onEscKeyPress)}const $=new E(".swiper-div",{loop:!1,spaceBetween:24,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".feedbacks-button-next",prevEl:".feedbacks-button-prev",addIcons:!1},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:{forceToAxis:!0},simulateTouch:!0,breakpoints:{0:{slidesPerView:1},768:{slidesPerView:2},1440:{slidesPerView:3}}}),ke=document.querySelector(".feedbacks");ke.addEventListener("keydown",e=>{e.key==="Tab"&&(e.preventDefault(),e.shiftKey?$.slidePrev():$.slideNext())});const T=document.querySelector(".feedbacks-button-prev"),A=document.querySelector(".feedbacks-button-next");function _(e){e&&window.requestAnimationFrame(()=>e.blur())}T&&T.addEventListener("click",function(){_(this)});A&&A.addEventListener("click",function(){_(this)});const h=document.querySelector(".open-menu"),l=document.querySelector(".close-menu"),d=document.querySelector(".mob-menu"),I=document.querySelectorAll(".menu-link"),pe=document.querySelectorAll(".header-link"),O=window.matchMedia("(max-width: 768px)").matches,B=e=>{e.preventDefault();const t=e.currentTarget.getAttribute("href"),n=document.querySelector(t);n&&n.scrollIntoView({behavior:"smooth",block:"start"}),e.currentTarget.blur()};if(d&&O){const e=s=>{s.key==="Escape"&&o()},t=s=>{s.target===d&&o()},n=s=>{B(s),s.currentTarget.classList.contains("menu-link")&&o()},i=()=>{d.classList.add("is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",e),d.addEventListener("click",t),l==null||l.addEventListener("click",o),I.forEach(s=>s.addEventListener("click",n))},o=()=>{d.classList.remove("is-open"),document.body.style.overflow="",document.removeEventListener("keydown",e),d.removeEventListener("click",t),l==null||l.removeEventListener("click",o),I.forEach(s=>s.removeEventListener("click",n))};h==null||h.addEventListener("click",i)}O||pe.forEach(e=>e.addEventListener("click",B));const P=document.querySelector("#footerMail"),fe=document.querySelector("#formFooter"),ge=document.querySelectorAll(".footer-anchor-link");ge.forEach(e=>e.addEventListener("click",B));const ye=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;fe.addEventListener("submit",e=>{e.preventDefault(),r.destroy();const t=P.value.trim().toLowerCase();if(t===""){r.show({message:"Поле e-mail не може бути порожнім!",color:"red",timeout:5e3,position:"center"});return}if(!ye.test(t)){r.show({message:"Некоректний e-mail!",color:"red",timeout:2500,position:"center"});return}r.show({message:`Дякуємо, ваш e-mail "${t}" успішно відправлено!`,color:"green",timeout:4e3,position:"center"}),P.value=""});new E(".hero-slider",{slidesPerView:1,slidesPerGroup:1,keyboard:{enabled:!0,onlyInViewport:!0},navigation:{nextEl:".hero-button-next",prevEl:".hero-button-prev"}});const D=document.querySelector(".hero-button-prev"),N=document.querySelector(".hero-button-next");function R(e){e&&window.requestAnimationFrame(()=>e.blur())}D&&D.addEventListener("click",function(){R(this)});N&&N.addEventListener("click",function(){R(this)});
//# sourceMappingURL=index.js.map
