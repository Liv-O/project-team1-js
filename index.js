import{i as r,A as z,a as h,S}from"./assets/vendor-DHN7Kf4x.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const p=document.querySelector(".backdrop-book-modal"),K=document.querySelector(".book-modal-close-btn"),W=document.querySelector(".book-img-container"),j=document.querySelector(".book-modal-info"),Z="https://books-backend.p.goit.global/";async function Q(e){try{const o=(await h.get(`${Z}books/${e}`)).data;G(o)}catch(t){r.error({title:"Error",message:"Error while querying",position:"topRight"}),console.error("Error while querying: ",t)}}function G(e){W.innerHTML=`<img src="${e.book_image}" alt="${e.title}" class="book-img" />`,j.innerHTML=`
  <h2 class="book-title">${e.title}</h2>
  <p class="book-author">${e.author}</p>
  <p class="book-price">$${e.price}</p>
  `}function Y(){p.classList.remove("window-is-invisible"),document.body.classList.add("not-scrolling-page"),document.addEventListener("keydown",N)}K.addEventListener("click",q);p.addEventListener("click",e=>{e.target===p&&q()});function q(){p.classList.add("window-is-invisible"),document.body.classList.remove("not-scrolling-page"),document.removeEventListener("keydown",N)}function N(e){e.key==="Escape"&&q()}const C=document.querySelector("#quantity"),J=document.querySelector(".neg-book-btn"),X=document.querySelector(".add-book-btn"),ee=document.querySelector(".add-to-cart-btn"),te=document.querySelector(".buy-now-btn");function g(){return Number(C.value)}X.addEventListener("click",()=>{C.value=g()+1});J.addEventListener("click",()=>{const e=g();e>1&&(C.value=e-1)});ee.addEventListener("click",e=>{e.preventDefault(),console.log("Number of selected books:",g()),r.success({title:"Success",message:`Added ${g()} book(s) to cart`,position:"topRight"})});te.addEventListener("click",e=>{e.preventDefault(),r.info({title:"",message:"Thank you for your purchase",position:"topRight"})});new z(".accordion-container",{duration:300,showMultiple:!0});const oe=document.querySelector("#books-categories-desktop-list"),ne=document.querySelector(".categories-dropdown-wrapper"),M=document.querySelector(".categories-dropdown-btn"),y=document.querySelector("#books-categories-dropdown-list"),m=document.querySelector(".books-list"),v=document.querySelector(".books-shown-quantity"),f=document.querySelector(".books-load-more");h.defaults.baseURL="https://books-backend.p.goit.global/books";let u=0,a=[],V="all";const _=4;function se(){return window.innerWidth>=1440?24:10}function ie(e){return e.map(t=>`
    <li class="book-list-item">
        <img class="book-item-img" src="${t.book_image}" alt="${t.title}" />
        <div class="book-item-description">
          <div class="book-description-text">
            <div class="book-title-and-author">
              <h3 class="book-item-title">${ue(t.title)||"No Title"}</h3>
              <p class="book-item-author">${t.author||"Unknown Author"}</p>
            </div>
            <p class="book-item-price">$${parseInt(t.price)}</p>
          </div>
          <button class="book-item-btn" type="button" data-book-id="${t._id}">Learn More</button>
        </div>
    </li>
  `).join("")}function re(e=!1){if(!a.length){m.innerHTML="<li class='books-list-problem'>No books found</li>",v.textContent="0 books",f.classList.add("books-hidden");return}const t=a.slice(e?u-_:0,u),o=ie(t);e?m.insertAdjacentHTML("beforeend",o):m.innerHTML=o,v.textContent=`Showing ${Math.min(u,a.length)} of ${a.length} books`,f.classList.toggle("books-hidden",u>=a.length)}function ce(e){let t='<li class="category-list-item active" data-category-name="all">All categories</li>';return e.forEach(o=>{var i;(i=o.list_name)!=null&&i.trim()&&(t+=`<li class="category-list-item" data-category-name="${o.list_name}">${o.list_name}</li>`)}),t}function ae(e,t){const o=e.querySelector(".category-list-item.active");o&&o.classList.remove("active"),t.classList.add("active")}function le(e,t=!1){e.querySelectorAll(".category-list-item").forEach(o=>{o.addEventListener("click",i=>{if(ae(e,i.target),x(i.target.dataset.categoryName),t){const n=M.querySelector(".categories-dropdown-text");n.textContent=i.target.textContent,e.classList.add("books-hidden")}})})}async function de(){const e=window.innerWidth<1440,t=e?y:oe;t.innerHTML="<li>Loading categories...</li>";try{const{data:o}=await h.get("/category-list"),i=ce(o);if(t.innerHTML=i,le(t,e),e){const n=M.querySelector(".categories-dropdown-text"),s=t.querySelector(".category-list-item.active");n.textContent=(s==null?void 0:s.textContent)||"All categories"}}catch{t.innerHTML="<li>Error loading categories</li>"}}async function x(e,t=!1){t?u+=_:(m.innerHTML="<li class='books-list-problem'>Loading books...</li>",v.textContent="",f.classList.add("books-hidden"),u=se(),a=[],V=e);const o=e==="all"?"/top-books":`/category?category=${e}`;try{if(!a.length||!t){const{data:i}=await h.get(o);let n=[];e==="all"?i.forEach(c=>{var b;(b=c.books)!=null&&b.length&&n.push(...c.books)}):n=i;const s=new Set;a=n.filter(c=>{const b=(c.title||"").toLowerCase().trim();return s.has(b)?!1:(s.add(b),!0)})}re(t)}catch{m.innerHTML="<li class='books-list-problem'>Error loading books</li>",v.textContent="Error",f.classList.add("books-hidden")}}function ue(e){return e?e.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):""}f.addEventListener("click",()=>x(V,!0));M.addEventListener("click",()=>y.classList.toggle("books-hidden"));document.addEventListener("click",e=>{!ne.contains(e.target)&&!y.classList.contains("books-hidden")&&y.classList.add("books-hidden")});m.addEventListener("click",async e=>{if(!e.target.classList.contains("book-item-btn"))return;const t=e.target.dataset.bookId;await Q(t),Y()});de().then(()=>x("all"));const L=document.querySelector(".backdrop-contact-modal"),me=document.querySelector(".modal-close-btn"),be=document.querySelector(".contact-modal-text");function ke(e){be.textContent=e,L.classList.remove("window-is-invisible"),document.body.classList.add("not-scrolling-page"),document.addEventListener("keydown",O)}me.addEventListener("click",w);L.addEventListener("click",e=>{e.target===L&&w()});function w(){L.classList.add("window-is-invisible"),document.body.classList.remove("not-scrolling-page"),document.removeEventListener("keydown",O)}function O(e){e.key==="Escape"&&w()}const k=document.querySelector(".contact-modal-form");k.addEventListener("submit",e=>{e.preventDefault();const t=k.elements.name.value.trim().toLowerCase(),o=k.elements.email.value.trim().toLowerCase(),i=k.elements.message.value.trim().toLowerCase();if(!t||!o){r.error({title:"Error",message:"Please, fill in the Name and Email fields!",position:"topRight"});return}console.log({name:t,email:o,message:i}),k.reset(),w(),r.success({title:"Congratulations!",message:"Data sent. Have a nice day)",position:"topRight"})});new S(".events-swiper",{spaceBetween:24,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".events-button-next",prevEl:".events-button-prev"},keyboard:{enabled:!0,onlyInViewport:!0},grabCursor:!0,breakpoints:{375:{slidesPerView:1},768:{slidesPerView:2},1440:{slidesPerView:3}}});const fe=document.querySelector(".events-list");fe.addEventListener("click",e=>{const t=e.target.closest(".event-btn");if(!t)return;const o=t.closest(".event-item");if(!o)return;const i=o.querySelector(".event-subtitle").textContent;ke(i)});const B=new S(".swiper-div",{loop:!1,spaceBetween:24,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".feedbacks-button-next",prevEl:".feedbacks-button-prev",addIcons:!1},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:{forceToAxis:!0},simulateTouch:!0,breakpoints:{0:{slidesPerView:1},768:{slidesPerView:2},1440:{slidesPerView:3}}}),pe=document.querySelector(".feedbacks");pe.addEventListener("keydown",e=>{e.key==="Tab"&&(e.preventDefault(),e.shiftKey?B.slidePrev():B.slideNext())});const $=document.querySelector(".feedbacks-button-prev"),A=document.querySelector(".feedbacks-button-next");function R(e){e&&window.requestAnimationFrame(()=>e.blur())}$&&$.addEventListener("click",function(){R(this)});A&&A.addEventListener("click",function(){R(this)});const E=document.querySelector(".open-menu"),l=document.querySelector(".close-menu"),d=document.querySelector(".mob-menu"),I=document.querySelectorAll(".menu-link"),ge=document.querySelectorAll(".header-link"),F=window.matchMedia("(max-width: 768px)").matches,T=e=>{e.preventDefault();const t=e.currentTarget.getAttribute("href"),o=document.querySelector(t);o&&o.scrollIntoView({behavior:"smooth",block:"start"}),e.currentTarget.blur()};if(d&&F){const e=s=>{s.key==="Escape"&&n()},t=s=>{s.target===d&&n()},o=s=>{T(s),s.currentTarget.classList.contains("menu-link")&&n()},i=()=>{d.classList.add("is-open"),document.body.style.overflow="hidden",document.addEventListener("keydown",e),d.addEventListener("click",t),l==null||l.addEventListener("click",n),I.forEach(s=>s.addEventListener("click",o))},n=()=>{d.classList.remove("is-open"),document.body.style.overflow="",document.removeEventListener("keydown",e),d.removeEventListener("click",t),l==null||l.removeEventListener("click",n),I.forEach(s=>s.removeEventListener("click",o))};E==null||E.addEventListener("click",i)}F||ge.forEach(e=>e.addEventListener("click",T));const P=document.querySelector("#footerMail"),ye=document.querySelector("#formFooter"),ve=document.querySelectorAll(".footer-anchor-link");ve.forEach(e=>e.addEventListener("click",T));const Le=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;ye.addEventListener("submit",e=>{e.preventDefault(),r.destroy();const t=P.value.trim().toLowerCase();if(t===""){r.show({message:"Поле e-mail не може бути порожнім!",color:"red",timeout:5e3,position:"center"});return}if(!Le.test(t)){r.show({message:"Некоректний e-mail!",color:"red",timeout:2500,position:"center"});return}r.show({message:`Дякуємо, ваш e-mail "${t}" успішно відправлено!`,color:"green",timeout:4e3,position:"center"}),P.value=""});new S(".hero-slider",{slidesPerView:1,slidesPerGroup:1,keyboard:{enabled:!0,onlyInViewport:!0},navigation:{nextEl:".hero-button-next",prevEl:".hero-button-prev"}});const D=document.querySelector(".hero-button-prev"),H=document.querySelector(".hero-button-next");function U(e){e&&window.requestAnimationFrame(()=>e.blur())}D&&D.addEventListener("click",function(){U(this)});H&&H.addEventListener("click",function(){U(this)});
//# sourceMappingURL=index.js.map
