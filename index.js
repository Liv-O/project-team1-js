import{a as k,i as l,S,N as M,P as T,K as P,M as A}from"./assets/vendor-Be4DA63O.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function s(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=s(o);fetch(o.href,i)}})();const $=document.querySelector("#books-categories-desktop-list"),B=document.querySelector(".categories-dropdown-wrapper"),y=document.querySelector(".categories-dropdown-btn"),p=document.querySelector("#books-categories-dropdown-list"),u=document.querySelector(".books-list"),g=document.querySelector(".books-shown-quantity"),m=document.querySelector(".books-load-more");k.defaults.baseURL="https://books-backend.p.goit.global/books";let f=0,a=[],q="all";const D=4;function N(){return window.innerWidth>=1440?24:10}function H(){if(!a.length){u.innerHTML="<li class='books-list-problem'>No books found</li>",g.textContent="0 books",m.classList.add("books-hidden");return}const e=a.slice(0,f);u.innerHTML=e.map(t=>`
      <li class="book-list-item">
          <img class="book-item-img" src="${t.book_image}" alt="${t.title}" />
          <div class="book-item-description">
            <div class="book-description-text">
              <div class="book-title-and-author">
                <h3 class="book-item-title">${F(t.title)||"No Title"}</h3>
                <p class="book-item-author">${t.author||"Unknown Author"}</p>
              </div>
              <p class="book-item-price">$${parseInt(t.price)}</p>
            </div>
            <button class="book-item-btn" type="button" data-book-id="${t._id}">Learn More</button>
          </div>
      </li>
  `).join(""),g.textContent=`Showing ${e.length} of ${a.length} books`,m.classList.toggle("books-hidden",f>=a.length)}function I(e){let t='<li class="category-list-item active" data-category-name="all">All categories</li>';return e.forEach(s=>{var r;(r=s.list_name)!=null&&r.trim()&&(t+=`<li class="category-list-item" data-category-name="${s.list_name}">${s.list_name}</li>`)}),t}function O(e,t){const s=e.querySelector(".category-list-item.active");s&&s.classList.remove("active"),t.classList.add("active")}function _(e,t=!1){e.querySelectorAll(".category-list-item").forEach(s=>{s.addEventListener("click",r=>{if(O(e,r.target),h(r.target.dataset.categoryName),t){const o=y.querySelector(".categories-dropdown-text");o.textContent=r.target.textContent,e.classList.add("books-hidden")}})})}async function V(){const e=window.innerWidth<1440,t=e?p:$;t.innerHTML="<li>Loading categories...</li>";try{const{data:s}=await k.get("/category-list"),r=I(s);if(t.innerHTML=r,_(t,e),e){const o=y.querySelector(".categories-dropdown-text"),i=t.querySelector(".category-list-item.active");o.textContent=(i==null?void 0:i.textContent)||"All categories"}}catch{t.innerHTML="<li>Error loading categories</li>"}}async function h(e,t=!1){t?f+=D:(u.innerHTML="<li class='books-list-problem'>Loading books...</li>",g.textContent="",m.classList.add("books-hidden"),f=N(),a=[],q=e);const s=e==="all"?"/top-books":`/category?category=${e}`;try{if(!a.length||!t){const{data:r}=await k.get(s);let o=[];e==="all"?r.forEach(n=>{var c;(c=n.books)!=null&&c.length&&o.push(...n.books)}):o=r;const i=new Set;a=o.filter(n=>{const c=(n.title||"").toLowerCase().trim();return i.has(c)?!1:(i.add(c),!0)})}H()}catch{u.innerHTML="<li class='books-list-problem'>Error loading books</li>",g.textContent="Error",m.classList.add("books-hidden")}}function F(e){return e?e.toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):""}m.addEventListener("click",()=>h(q,!0));y.addEventListener("click",()=>p.classList.toggle("books-hidden"));document.addEventListener("click",e=>{!B.contains(e.target)&&!p.classList.contains("books-hidden")&&p.classList.add("books-hidden")});u.addEventListener("click",async e=>{e.target.classList.contains("book-item-btn")&&e.target.dataset.bookId});V().then(()=>h("all"));const b=document.querySelector(".backdrop-contact-modal"),K=document.querySelector(".modal-close-btn");document.querySelector(".contact-modal-text");K.addEventListener("click",w);b.addEventListener("click",e=>{e.target===b&&w()});function w(){b.classList.add("window-is-invisible"),document.body.classList.remove("not-scrolling-page"),document.removeEventListener("keydown",R)}function R(e){e.key==="Escape"&&w()}const d=document.querySelector(".contact-modal-form");d.addEventListener("submit",e=>{e.preventDefault();const t=d.elements.name.value.trim().toLowerCase(),s=d.elements.email.value.trim().toLowerCase(),r=d.elements.message.value.trim().toLowerCase();if(!t||!s){l.error({title:"Error",message:"Please, fill in the Name and Email fields!",position:"topRight"});return}l.success({title:"Congratulations!",message:"Data sent. Have a nice day)",position:"topRight"}),console.log({name:t,email:s,message:r}),d.reset()});const L=new S(".swiper-div",{modules:[M,T,P,A],loop:!1,spaceBetween:24,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev",addIcons:!1},keyboard:{enabled:!0,onlyInViewport:!0},mousewheel:{forceToAxis:!0},simulateTouch:!0,breakpoints:{0:{slidesPerView:1},768:{slidesPerView:2},1440:{slidesPerView:3}}}),U=document.querySelector(".swiper-wrapper");U.addEventListener("keydown",e=>{e.key==="Tab"&&(e.preventDefault(),e.shiftKey?L.slidePrev():L.slideNext())});const v=document.querySelector("#footerMail"),z=document.querySelector("#formFooter"),W=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;z.addEventListener("submit",e=>{e.preventDefault(),l.destroy();const t=v.value.trim().toLowerCase();if(t===""){l.show({message:"Поле e-mail не може бути порожнім!",color:"red",timeout:5e3,position:"center"});return}if(!W.test(t)){l.show({message:"Некоректний e-mail!",color:"red",timeout:2500,position:"center"});return}l.show({message:`Дякуємо, ваш e-mail "${t}" успішно відправлено!`,color:"green",timeout:4e3,position:"center"}),v.value=""});new S(".hero-slider",{slidesPerView:1,slidesPerGroup:1,keyboard:{enabled:!0,onlyInViewport:!0},navigation:{nextEl:".hero-button-next",prevEl:".hero-button-prev"}});const E=document.querySelector(".hero-button-prev"),C=document.querySelector(".hero-button-next");function x(e){e&&window.requestAnimationFrame(()=>e.blur())}E&&E.addEventListener("click",function(){x(this)});C&&C.addEventListener("click",function(){x(this)});
//# sourceMappingURL=index.js.map
